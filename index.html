<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>iOS Game &amp; App Catalog ‚Äî App Store Style</title>
<script src="script.js" type="module"></script>
<script src="chat.js" type="module"></script>
<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = {
    theme: {
      extend: {
        colors: {
          primary: '#6e1cff',
          dark: '#23004d',
          overlay: 'rgba(0,0,0,0.7)'
        },
      },
    },
  };
</script>
<style>
  :root {
    --vh: 100vh;
  }
  body.locked {
    overflow: hidden;
    height: calc(var(--vh));
  }
  body {
    background: linear-gradient(135deg, #3b006d, #6e1cff, #23004d);
    min-height: 100vh;
    font-family: 'Inter', sans-serif;
  }
  #loader {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.8);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9998;
    font-size: 2em;
    color: white;
  }
  .modal {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    visibility: hidden;
    opacity: 0;
    transition: visibility 0s, opacity 0.3s;
  }
  .modal.show {
    visibility: visible;
    opacity: 1;
  }
  .modal-content {
    background: #2b0057;
    padding: 20px;
    border-radius: 10px;
    color: white;
    text-align: center;
    max-width: 90%;
    max-height: 90%;
    overflow-y: auto;
    position: relative;
    transform: translateY(20px);
    transition: transform 0.3s ease-out;
  }
  .modal.show .modal-content {
    transform: translateY(0);
  }
  .modal-close-button {
    position: absolute;
    top: 10px;
    right: 10px;
    background: none;
    border: none;
    font-size: 1.5em;
    color: white;
    cursor: pointer;
  }
  .game-card:active {
    transform: scale(0.98);
    transition: transform 0.1s ease;
  }
  .icon-wrapper {
    border-radius: 12px; /* For rounded corners on the icon */
    overflow: hidden;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
  }
  /* –°—Ç–∏–ª–∏ –¥–ª—è –±–µ–π–¥–∂–∞ */
  .badge {
    font-size: 0.75rem; /* 12px */
    padding: 0.125rem 0.375rem; /* 2px 6px */
    line-height: 1;
  }

  /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –æ–Ω–ª–∞–π–Ω–∞ */
  .online-indicator {
    font-size: 0.75rem; /* 12px */
    white-space: nowrap;
  }
</style>
</head>
<body class="bg-gray-900 text-white min-h-screen flex flex-col items-center p-4">
<div id="loader" class="flex flex-col items-center justify-center">
    <div class="animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-purple-500"></div>
    <p class="mt-3">Loading...</p>
</div>

<header class="w-full max-w-2xl text-center mb-6">
    <h1 id="siteTitle" class="text-4xl font-bold mb-2 cursor-pointer">iOS Game Zone</h1>
    <p class="text-purple-300 text-xl">The best place for iOS games &amp; apps!</p>
    <p id="totalUsersCount" class="text-sm text-gray-400 mt-2">Total users: 0</p>
</header>

<div id="certificateInfo" class="w-full max-w-2xl bg-[rgba(255,255,255,0.05)] rounded-lg p-6 mb-6 text-center">
    <h2 class="text-2xl font-bold mb-4">How to install &amp; trust our apps?</h2>
    <p class="text-gray-300 mb-4">
        To install apps from our catalog, you need to follow these simple steps to trust our developer certificate. This ensures iOS allows the apps to run on your device.
    </p>
    <ol class="list-decimal list-inside text-left text-gray-300 mb-4 space-y-2">
        <li>Go to <span class="font-bold text-white">Settings</span> &gt; <span class="font-bold text-white">General</span> &gt; <span class="font-bold text-white">VPN &amp; Device Management</span>.</li>
        <li>Under "ENTERPRISE APP", you will see our developer profile (e.g., "iPhone Distribution: [Developer Name]"). Tap on it.</li>
        <li>Tap <span class="font-bold text-white">"Trust [Developer Name]"</span>.</li>
        <li>Confirm by tapping <span class="font-bold text-white">"Trust"</span> again in the pop-up.</li>
        <li>You're all set! You can now install and run any app from our catalog.</li>
    </ol>
    <p class="text-sm text-gray-400">
        This process is standard for installing third-party applications outside the App Store. Your device remains secure.
    </p>
</div>

<section id="catalogSection" class="w-full max-w-2xl hidden">
    <input type="text" id="searchInput" placeholder="Search games or apps..."
           class="w-full p-3 mb-4 rounded-lg bg-[rgba(255,255,255,0.05)] border border-purple-500/30 text-white placeholder-gray-400 hidden">

    <h2 id="mainListTitle" class="text-3xl font-bold mb-4 text-center">All Games</h2>
    <div id="gamesList" class="space-y-4">
        </div>
    <div id="showMoreContainer" class="mt-6 flex justify-center flex-wrap">
        </div>
</section>

<div id="gameModal" class="modal">
    <div class="modal-content">
        <button class="modal-close-button" onclick="closeModal()">√ó</button>
        <img id="modalIcon" src="" alt="App Icon" class="w-24 h-24 mx-auto mb-4 rounded-lg shadow-lg">
        <h3 id="modalTitle" class="text-2xl font-bold mb-2"></h3>
        <p id="modalDesc" class="text-gray-300 mb-4"></p>
        <div class="text-left text-sm text-gray-400 mb-4">
            <p><strong>Version:</strong> <span id="modalVersion">N/A</span></p>
            <p><strong>Size:</strong> <span id="modalSize">N/A</span></p>
            <p><strong>Min iOS:</strong> <span id="modalMinIos">N/A</span></p>
            <p><strong>Added:</strong> <span id="modalAddedDate">N/A</span></p>
            <p><strong>Genre:</strong> <span id="modalGenre">N/A</span></p>
            <p id="modalDownloadCount">‚¨áÔ∏è Downloads: 0</p>
        </div>
        <a id="modalDownload" href="#" target="_blank" class="block w-full">
            <button class="bg-purple-600 hover:bg-purple-800 text-white font-bold py-2 px-4 rounded w-full">‚¨áÔ∏è Download</button>
        </a>
        <button id="vipAccessButton" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded w-full mt-2 hidden">VIP Access</button>
    </div>
</div>

<div id="chatModal" class="modal hidden">
    <div class="modal-content max-w-md w-full flex flex-col h-[80vh] bg-gray-800 rounded-lg shadow-xl relative">
        <button class="modal-close-button" id="closeChatModal">√ó</button>
        <h3 class="text-xl font-bold text-white mb-3 text-center">Community Chat</h3>

        <div id="nicknamePrompt" class="mb-4 text-center p-4 bg-gray-700 rounded-lg" style="display: none;">
            <p class="mb-2 text-gray-300">Enter your nickname to join the chat:</p>
            <input type="text" id="nicknameInput" placeholder="Your Nickname" class="w-full p-2 rounded bg-gray-600 text-white border border-gray-500 mb-2">
            <button id="saveNickname" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded w-full">Save Nickname</button>
        </div>

        <div id="chatMain" class="flex flex-col flex-1" style="display: none;">
            <div class="flex justify-between items-center bg-gray-700 p-2 rounded-t-lg">
                <p class="text-sm text-gray-300">Logged in as: <span id="currentNickname" class="font-bold"></span></p>
                <button id="changeNickname" class="text-purple-400 hover:text-purple-300 text-sm">Change</button>
            </div>
            <div id="chatMessages" class="flex-1 overflow-y-auto p-3 bg-gray-900 rounded-b-lg mb-3 custom-scrollbar">
                </div>
            <form id="chatForm" class="flex gap-2 mt-auto">
                <input type="text" id="chatInput" placeholder="Type your message..."
                       class="flex-1 p-2 rounded bg-gray-700 text-white border border-gray-600">
                <button type="submit" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded">Send</button>
            </form>
        </div>
        <div id="onlineCounter" class="text-center text-sm text-gray-400 mt-2">Online: 0</div>
    </div>
</div>

<div id="moreModal" class="modal hidden">
    <div class="modal-content">
        <button class="modal-close-button" onclick="document.getElementById('moreModal').classList.add('hidden')">√ó</button>
        <h3 class="text-2xl font-bold mb-4">More Options</h3>
        <p class="text-gray-300 mb-4">More content coming soon!</p>
        <button class="bg-purple-600 hover:bg-purple-800 text-white font-bold py-2 px-4 rounded w-full" onclick="handleVipPurchaseClick()">Learn More about VIP</button>
    </div>
</div>

<footer class="mt-8 text-center text-gray-400 text-sm pb-4">
    ¬© 2025 iOS Game Zone
</footer>
<nav class="fixed bottom-0 left-0 w-full bg-[rgba(20,0,40,0.9)] text-white border-t border-purple-500/30 z-50 flex justify-around py-2">
<button class="flex flex-col items-center text-sm" id="navGames">
    üéÆ<span class="text-xs mt-1">Games</span>
</button>
<button class="flex flex-col items-center text-sm" id="navApps">
    üì±<span class="text-xs mt-1">Apps</span>
</button>
<button class="relative flex flex-col items-center text-sm" id="navChat">
    üí¨<span class="text-xs mt-1">Chat</span>
<span class="badge absolute -top-1 left-[69%] bg-red-600 text-white text-[10px] px-1 rounded-full hidden">0</span>
<span class="online-indicator absolute -bottom-1 left-[60%] text-green-400 text-xs font-bold"></span>
</button>
<button class="flex flex-col items-center text-sm" id="navMore">
    ‚ãØ<span class="text-xs mt-1">More</span>
</button>
</nav>
<div class="fixed inset-0 bg-black bg-opacity-70 hidden z-50 flex items-center justify-center p-4" id="vipMessageModal">
    <div class="bg-gray-800 p-6 rounded-lg shadow-xl text-center relative max-w-sm w-full">
        <button class="absolute top-3 right-3 text-gray-400 hover:text-white text-xl" onclick="this.parentElement.parentElement.classList.add('hidden');">&times;</button>
        <h3 class="text-xl font-bold mb-3 text-purple-400">VIP Access</h3>
        <p class="text-gray-300 mb-4">VIP features are coming soon!</p>
        <button class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-5 rounded">OK</button>
    </div>
</div>
</body>
</html>
